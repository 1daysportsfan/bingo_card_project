
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>æ£’çƒè³“æœå¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: 'Arial', sans-serif; background: #eee; margin: 0; padding: 0; text-align: center; }
    .title-container { display: flex; justify-content: center; align-items: center; margin-top: 20px; gap: 15px; }
    #logo { width: 60px; height: auto; }
    .title-text h1 { margin: 0; font-size: 24px; }
    .title-text small { font-size: 14px; color: #555; }

    .main-container {
  flex-direction: row;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    #bingo-container { display: flex; justify-content: center; width: 100%; }
    .bingo {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 4px;
      background: white;
      padding: 10px;
      width: fit-content;
    }
    .cell {
      background: white;
      border: 2px solid #444;
      padding: 10px;
      min-height: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      cursor: pointer;
      user-select: none;
    }
    .cell.marked { background: #4CAF50; color: white; font-weight: bold; }
    .free { background: #ccc; font-weight: bold; }

    .btn-group {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
      width: 200px;
    }
    .pdf-count-row {
      display: flex;
      align-items: center;
      gap: 5px;
      width: 100%;
    }
    select, button, input[type=number] {
      width: 100%;
      box-sizing: border-box;
      padding: 10px 15px;
      font-size: 14px;
    }
    .pdf-count-row input[type=number] {
      flex: 1;
      margin: 0;
    }
    .pdf-count-row span {
      white-space: nowrap;
    }
    button {
      background: #2196F3;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover { background: #1976D2; }

    @media (max-width: 768px) {
      .main-container {
  flex-direction: row; flex-direction: column; align-items: center; }
      .btn-group { width: 90%; align-items: center; }
      .btn-group button { font-size: 16px; }
      .cell { font-size: 12px; min-height: 60px; }
    }
  
    .btn-group {
      margin-left: 20px;
    }

    @media print {
      .btn-group, .title-container, select, input, label, button, .pdf-count-row {
        display: none !important;
      }
      body {
        background: white;
      }
      .cell {
        cursor: default;
        box-shadow: none;
      }
    }
</style>

</head>
<body>
  <div class="title-container">
    <img id="logo" src="logo.png" alt="Logo">
    <div class="title-text">
      <h1>æ£’çƒè³“æœå¡</h1>
      <small>Baseball Bingo Card</small>
    </div>
  </div>

  <div class="main-container">
    <div id="bingo-container">
      <div id="bingo" class="bingo"></div>
    </div>

    <div class="btn-group">
      <label for="lang">é¡¯ç¤ºèªè¨€ï¼š</label>
      <select id="lang" onchange="generateBingo()">
        <option value="zh">ä¸­æ–‡</option>
        <option value="en">English</option>
        <option value="both" selected>ä¸­è‹±å°ç…§</option>
      </select>

      <div class="pdf-count-row">
        <input type="number" id="pdfCount" value="5" min="1" max="50">
        <span>å¼µ</span>
      </div>

      <button onclick="generateBingo()">ğŸ”„ é‡æ–°ç”¢ç”Ÿ</button>
      <button onclick="window.print()">ğŸ–¨ï¸ åˆ—å°è³“æœå¡</button>
      <button onclick="downloadAsImage()">ğŸ“¥ ä¸‹è¼‰åœ–ç‰‡</button>
      <button onclick="downloadPDF()">ğŸ“„ æ‰¹æ¬¡åŒ¯å‡º PDF</button>
      <button onclick="window.location.href='help.html'">â“ å¹«åŠ©èªªæ˜</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    const baseballEvents = [
      { zh: "å…¨å£˜æ‰“", en: "Home Run" },
      { zh: "å®‰æ‰“", en: "Base Hit" },
      { zh: "ä¸‰æŒ¯", en: "Strikeout" },
      { zh: "ä¿é€", en: "Walk" },
      { zh: "ç›œå£˜æˆåŠŸ", en: "Stolen Base" },
      { zh: "é›™æ®ºå®ˆå‚™", en: "Double Play" },
      { zh: "é«˜é£›çŠ§ç‰²æ‰“", en: "Sacrifice Fly" },
      { zh: "æ•™ç·´æŠ—è­°", en: "Coach Arguing" },
      { zh: "æŒ‘æˆ°æˆåŠŸ", en: "Challenge Success" },
      { zh: "æš´æŠ•", en: "Wild Pitch" },
      { zh: "å†è¦‹å®‰æ‰“", en: "Walk-off Hit" },
      { zh: "æ¸¸æ“Šç¾æŠ€", en: "Shortstop Gem" },
      { zh: "ç•Œå¤–æ¥æ®º", en: "Foul Out" },
      { zh: "æ•é€¸", en: "Passed Ball" },
      { zh: "è§¸èº«çƒ", en: "Hit by Pitch" },
      { zh: "å¤±èª¤", en: "Error" },
      { zh: "æ»¾åœ°çƒå‡ºå±€", en: "Ground Out" },
      { zh: "é£›çƒå‡ºå±€", en: "Fly Out" },
      { zh: "æ‰“æ“Šå»¶é•·", en: "Long At-Bat" },
      { zh: "å†è¦‹å…¨å£˜æ‰“", en: "Walk-off HR" },
      { zh: "é‡æ‰‹é¸æ“‡", en: "Fielder's Choice" },
      { zh: "å¤–é‡åŠ©æ®º", en: "Outfield Assist" },
      { zh: "æ›å®ˆä½ç½®", en: "Position Change" },
      { zh: "è§¸æ“ŠæˆåŠŸ", en: "Successful Bunt" },
      { zh: "æŠ•æ‰‹æ›äºº", en: "Pitching Change" }
    ];

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function generateBingo() {
      const lang = document.getElementById('lang').value;
      const bingoDiv = document.getElementById('bingo');
      bingoDiv.innerHTML = '';
      const shuffled = shuffle([...baseballEvents]);
      let count = 0;

      for (let i = 0; i < 25; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';

        if (i === 12) {
          cell.innerHTML = '<strong>Free Space</strong>';
          cell.classList.add('marked', 'free');
        } else {
          const event = shuffled[count++];
          if (lang === 'zh') cell.innerHTML = event.zh;
          else if (lang === 'en') cell.innerHTML = event.en;
          else cell.innerHTML = `<div>${event.zh}</div><div style="font-size:12px;color:gray;">${event.en}</div>`;
          cell.onclick = () => cell.classList.toggle('marked');
        }

        bingoDiv.appendChild(cell);
      }
    }

    function downloadAsImage() {
      html2canvas(document.getElementById('bingo')).then(canvas => {
        const link = document.createElement('a');
        link.download = 'bingo.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    async function downloadPDF() {
      const count = parseInt(document.getElementById('pdfCount').value);
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();

      for (let i = 0; i < count; i++) {
        generateBingo();
        await html2canvas(document.getElementById('bingo')).then(canvas => {
          const imgData = canvas.toDataURL('image/png');
          if (i > 0) pdf.addPage();
          pdf.text(`æ£’çƒè³“æœå¡ #${i + 1}`, 10, 10);
          pdf.addImage(imgData, 'PNG', 10, 20, 190, 190);
        });
      }
      pdf.save('bingo_cards.pdf');
    }

    generateBingo();
  </script>
</body>
</html>
